
# database

This is the default database layer, which imports all sql files by default giving you a consistent reusable image for distributed database deployments.


## dependencies

This image depends on a local copy of the `rathena:latest` base image generated by [rathena](../rathena/).


## configuration

_By default the `Dockerfile` exposes port 3306 (for mysql)._

The following environment variables can be set to change default values:

- `ROOTPW`
- `DBNAME`
- `DBUSER`
- `DBPASS`
- `SERVERUSER`
- `SERVERPASS`

_Review the `Dockerfile` for default values._

More detailed customization can be added by modifying the `Dockerfile` or `add/docker/db.sh`, which executes rathena specific configuration steps (including the rebuild of the sql for items and loading all sql files).

If you wish to add global configuration or modify rathena repository files prior to building, you can add them to `add/` using the same relative paths (_eg. `src/`, `conf/import/`, `npc/`, and `db/`_).


## execution

**The `full` container that runs a complete rathena instance depends on this image being labeled as `rathena-db:latest`, which can be built via:**

	docker build -t "rathena-db:latest" .


## notes

Ideally a deployment script at the root of this project would handle setting credentials for mysql and server access per deployment, but for a sane initial state, full instance deployments, and testing purposes defaults are applied here first.
