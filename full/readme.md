
# full

This is a final image that can be launched for a completely isolated local instance of rathena.  _Due to the nature of running multiple local copies it will expect all traffic to come through `127.0.0.1`._  However, we can adjust the external docker ports to allow for multiple running containers on the same host.


## dependencies

This image depends on a local copy of the `rathena-db:latest` base image generated by [db](../db/).


## configuration

_By default the `Dockerfile` exposes ports 6900, 5121, and 6121 for all three rAthena servers._

If you wish to add global configuration prior to execution you can add files to `add/` using the same project-relative paths (_eg. `src/`, `conf/import/`, `npc/`, and `db/`_).


## execution

To build this instance:

	docker build -t "rathena-full:latest" .

To launch a stand-alone local copy:

	id=$(docker create -ti -p "5121:5121" -p "6121:6121" -p "6900:6900" rathena-full) docker start $id

_This sets a temporary `id` environment variable, then passes it to the start command which will launch your container._  It also maps each port in the format of `host:container`.

**To run multiple instances you will need to reconfigure the ports before running the build, and change the mapping when creating the instance.**


## notes

Currently the way configuration through docker works prevents us from truly creating a reusable pre-configured container, this is due to how the servers expect valid port mapping to share with the client.

Additionally there is the problem of credentials for mysql and server expecting the settings from the previous container.

Therefore, I plan to revisit the build modularity in a future update that will be a significant deviation from where this sits.

This deviation is necessary to support multiple running instances, which was the intended proof-of-concept for this project.
